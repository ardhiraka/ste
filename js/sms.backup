let SMS = {
    data: '',
    format: {
        full: new RegExp("^([A-Z.]+)#([0-9.]+)@([0-9]+)$"),
        short: new RegExp("^([A-Z.]+)@([0-9]+)$")
    },
    code: {
        J: 'odd',
        P: 'even',
        T: 'big',
        S: 'small'
    },
    number: {
        even: [0, 2, 4, 6, 8],
        odd: [1, 3, 5, 7, 9],
        big: [5, 6, 7, 8, 9],
        small: [0, 1, 2, 3, 4],
    },
    objects: [],
    messages: {
        correct: [],
        inCorrect: []
    },
    setData(message) {
        this.data = message;

        return this;
    },
    getObjects() {
        this.objects = this.data.split(' ');

        return this.objects;
    },
    parse() {
        let app = this;
      
        this.restart();

        this.getObjects().forEach(item => {
            let fullText, theCode, theLoop, thePrice;

            if (app.format.full.test(item)) {
                [fullText, theCode, theLoop, thePrice] = app.format.full.exec(item);

                app.algorithm(theCode, theLoop, thePrice);
            } else if (app.format.short.test(item)) {
                [fullText, theCode, thePrice] = app.format.short.exec(item);

                app.algorithm(theCode, theLoop, thePrice);
            } else {
                app.messages.inCorrect.push(item);
            }
        });
      
      return app;
    },
    algorithm(theCode, theLoop, thePrice) {
        let app = this;
        theCode = theCode.replace('.', ' ');

        if (theCode in this.code) {
            let data = this.number[this.code[theCode]];

            this.addMessage(data, theCode, thePrice);
        } else {
            this.addMessage(theLoop, theCode, thePrice);
        }
    },
    addMessage(data, code, price){
        let app     = this;
        let items   = Array.isArray(data)
            ? data
            : typeof data == "undefined"
                ? ['N/A']
                : data.split('.');

        items.forEach(item => {
            let message = item == "N/A"
                ? code + " " + price
                : code + " " + item + " " + price;

            app.messages.correct.push(message);
        });
    },
    restart() {
        this.messages = {
            correct: [],
            inCorrect: []
        };
    }
};